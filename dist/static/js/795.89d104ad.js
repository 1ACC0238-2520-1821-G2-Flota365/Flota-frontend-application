"use strict";(self["webpackChunkflota365_vue"]=self["webpackChunkflota365_vue"]||[]).push([[795],{706:(t,e,r)=>{var i=r(350).PROPER,a=r(9039),s=r(7452),c="​᠎";t.exports=function(t){return a((function(){return!!s[t]()||c[t]()!==c||i&&s[t].name!==t}))}},2762:(t,e,r)=>{var i=r(6518),a=r(3802).trim,s=r(706);i({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},3607:(t,e,r)=>{var i=r(2839),a=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!a&&+a[1]},3709:(t,e,r)=>{var i=r(2839),a=i.match(/firefox\/(\d+)/i);t.exports=!!a&&+a[1]},3763:(t,e,r)=>{var i=r(2839);t.exports=/MSIE|Trident/.test(i)},6910:(t,e,r)=>{var i=r(6518),a=r(9504),s=r(9306),c=r(8981),o=r(6198),n=r(4606),l=r(655),d=r(9039),v=r(4488),u=r(4598),f=r(3709),m=r(3763),p=r(9519),g=r(3607),h=[],_=a(h.sort),S=a(h.push),y=d((function(){h.sort(void 0)})),C=d((function(){h.sort(null)})),b=u("sort"),x=!d((function(){if(p)return p<70;if(!(f&&f>3)){if(m)return!0;if(g)return g<603;var t,e,r,i,a="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)h.push({k:e+i,v:r})}for(h.sort((function(t,e){return e.v-t.v})),i=0;i<h.length;i++)e=h[i].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}})),w=y||!C||!b||!x,A=function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:l(e)>l(r)?1:-1}};i({target:"Array",proto:!0,forced:w},{sort:function(t){void 0!==t&&s(t);var e=c(this);if(x)return void 0===t?_(e):_(e,t);var r,i,a=[],l=o(e);for(i=0;i<l;i++)i in e&&S(a,e[i]);v(a,A(t)),r=o(a),i=0;while(i<r)e[i]=a[i++];while(i<l)n(e,i++);return e}})},8795:(t,e,r)=>{r.r(e),r.d(e,{default:()=>m});r(2008),r(2062),r(4114),r(4782),r(8111),r(1701),r(6099);var i=function(){var t=this,e=t._self._c;return e("div",[e("Header",{attrs:{title:"Gestión de Flota"}}),e("div",{staticClass:"dashboard-grid",staticStyle:{"margin-bottom":"1.875rem"}},[e("div",{staticClass:"stats-card"},[e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},[e("div",[e("div",{staticClass:"stats-label"},[t._v("Servicios Pendientes")]),e("div",{staticClass:"stats-value"},[t._v(t._s(t.serviceStats.pending))]),t._m(0)]),t._m(1)])]),e("div",{staticClass:"stats-card"},[e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},[e("div",[e("div",{staticClass:"stats-label"},[t._v("En Ruta")]),e("div",{staticClass:"stats-value"},[t._v(t._s(t.serviceStats.inRoute))]),t._m(2)]),t._m(3)])]),e("div",{staticClass:"stats-card"},[e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},[e("div",[e("div",{staticClass:"stats-label"},[t._v("Completados Hoy")]),e("div",{staticClass:"stats-value"},[t._v(t._s(t.serviceStats.completedToday))]),t._m(4)]),t._m(5)])]),e("div",{staticClass:"stats-card"},[e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},[e("div",[e("div",{staticClass:"stats-label"},[t._v("Total Servicios")]),e("div",{staticClass:"stats-value"},[t._v(t._s(t.serviceStats.total))]),t._m(6)]),t._m(7)])])]),e("div",{staticClass:"card",staticStyle:{"margin-bottom":"1.875rem"}},[e("div",{staticClass:"card-header"},[e("h2",{staticClass:"card-title"},[t._v("Servicios")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.push("/service/new")}}},[e("i",{staticClass:"fas fa-plus",staticStyle:{"margin-right":"0.5rem"}}),t._v(" Nuevo Servicio ")])]),e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 1.5rem","border-bottom":"1px solid #eee"}},[e("div",{staticStyle:{display:"flex",gap:"1rem","align-items":"center"}},[e("div",{staticClass:"form-group",staticStyle:{margin:"0",width:"300px"}},[e("div",{staticStyle:{position:"relative"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control",staticStyle:{"padding-right":"35px"},attrs:{type:"text",placeholder:"Buscar por código, conductor, placa..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("i",{staticClass:"fas fa-search",staticStyle:{position:"absolute",right:"10px",top:"12px",color:"#666"}})])]),e("div",{staticClass:"form-group",staticStyle:{margin:"0"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.statusFilter,expression:"statusFilter"}],staticClass:"form-control",staticStyle:{width:"150px"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.statusFilter=e.target.multiple?r:r[0]}}},[e("option",{attrs:{value:""}},[t._v("Todos los estados")]),e("option",{attrs:{value:"pending"}},[t._v("Pendientes")]),e("option",{attrs:{value:"in_route"}},[t._v("En Ruta")]),e("option",{attrs:{value:"completed"}},[t._v("Completados")]),e("option",{attrs:{value:"cancelled"}},[t._v("Anulados")])])]),e("div",{staticClass:"form-group",staticStyle:{margin:"0"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateFilter,expression:"dateFilter"}],staticClass:"form-control",staticStyle:{width:"150px"},attrs:{type:"date"},domProps:{value:t.dateFilter},on:{input:function(e){e.target.composing||(t.dateFilter=e.target.value)}}})])]),e("div",[e("button",{staticClass:"btn btn-secondary",on:{click:t.clearFilters}},[e("i",{staticClass:"fas fa-times",staticStyle:{"margin-right":"0.5rem"}}),t._v(" Limpiar ")]),e("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-left":"0.5rem"},on:{click:t.exportServices}},[e("i",{staticClass:"fas fa-download",staticStyle:{"margin-right":"0.5rem"}}),t._v(" Exportar ")])])]),t.loading?e("div",{staticStyle:{"text-align":"center",padding:"2rem"}},[e("i",{staticClass:"fas fa-spinner fa-spin",staticStyle:{"font-size":"2rem",color:"var(--color-turquoise)"}}),e("p",[t._v("Cargando servicios...")])]):t.error?e("div",{staticStyle:{"background-color":"#fee",border:"1px solid #fcc",padding:"1rem","border-radius":"4px",margin:"1rem 1.5rem"}},[e("p",{staticStyle:{color:"#c00",margin:"0"}},[e("i",{staticClass:"fas fa-exclamation-triangle"}),t._v(" "+t._s(t.error)+" ")]),e("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-top":"0.5rem"},on:{click:t.loadServices}},[e("i",{staticClass:"fas fa-redo"}),t._v(" Reintentar ")])]):e("div",{staticStyle:{"overflow-x":"auto"}},[e("table",{staticClass:"data-table"},[t._m(8),e("tbody",t._l(t.paginatedServices,(function(r){return e("tr",{key:r.id},[e("td",[e("strong",[t._v(t._s(r.code))])]),e("td",[t._v(t._s(t.formatDate(r.serviceDate)))]),e("td",[e("div",{staticStyle:{"max-width":"300px"}},[e("div",{staticStyle:{"margin-bottom":"0.25rem"}},[e("strong",{staticStyle:{color:"var(--color-turquoise)"}},[t._v(t._s(r.origin.district))])]),e("div",{staticStyle:{"font-size":"0.85rem",color:"#666","margin-bottom":"0.5rem"}},[t._v(" "+t._s(r.origin.address)+" ")]),e("div",{staticStyle:{"font-size":"0.85rem"}},[e("span",{staticStyle:{color:"#666"}},[t._v("→ ")]),t._l(r.destinations.slice(0,2),(function(i,a){return e("span",{key:a},[e("strong",[t._v(t._s(i.district))]),a<r.destinations.slice(0,2).length-1?e("span",[t._v(", ")]):t._e()])})),r.destinations.length>2?e("span",{staticStyle:{color:"#666"}},[t._v(" (+"+t._s(r.destinations.length-2)+" más) ")]):t._e()],2)])]),e("td",[t._v(t._s(r.driverName))]),e("td",[t._v(t._s(r.vehiclePlate))]),e("td",[t._v(t._s(r.departureTime))]),e("td",[e("StatusBadge",{attrs:{status:r.status,text:t.getStatusText(r.status)}})],1),e("td",[e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"0.25rem 0.5rem","font-size":"0.75rem","margin-right":"0.25rem"},attrs:{title:"Ver detalle"},on:{click:function(e){return t.viewService(r)}}},[e("i",{staticClass:"fas fa-eye"})]),e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"0.25rem 0.5rem","font-size":"0.75rem","margin-right":"0.25rem"},attrs:{disabled:"completed"===r.status||"cancelled"===r.status,title:"Editar"},on:{click:function(e){return t.editService(r)}}},[e("i",{staticClass:"fas fa-edit"})]),e("button",{staticClass:"btn btn-danger",staticStyle:{padding:"0.25rem 0.5rem","font-size":"0.75rem"},attrs:{disabled:"completed"===r.status||"cancelled"===r.status,title:"Anular"},on:{click:function(e){return t.confirmCancelService(r)}}},[e("i",{staticClass:"fas fa-ban"})])])])})),0)]),0===t.filteredServices.length?e("div",{staticStyle:{"text-align":"center",padding:"2rem",color:"#666"}},[e("i",{staticClass:"fas fa-clipboard-list",staticStyle:{"font-size":"3rem","margin-bottom":"1rem",opacity:"0.3"}}),e("p",[t._v("No hay servicios registrados")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.push("/service/new")}}},[t._v(" Crear primer servicio ")])]):t._e()]),t.filteredServices.length>0?e("Pagination",{attrs:{"current-page":t.currentPage,"total-items":t.filteredServices.length,"per-page":t.itemsPerPage,"item-label":"servicios"},on:{"page-change":function(e){t.currentPage=e}}}):t._e()],1),e("Modal",{attrs:{show:t.showDetailModal,title:"Detalle del Servicio"},on:{close:function(e){t.showDetailModal=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showDetailModal=!1}}},[t._v("Cerrar")]),t.selectedService&&"completed"!==t.selectedService.status&&"cancelled"!==t.selectedService.status?e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.push("/service/edit/".concat(t.selectedService.id))}}},[t._v(" Editar Servicio ")]):t._e()]},proxy:!0}])},[t.selectedService?e("div",[e("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr",gap:"2rem"}},[e("div",[e("h4",{staticStyle:{"margin-bottom":"1rem",color:"var(--color-turquoise)"}},[t._v("Información General")]),e("p",[e("strong",[t._v("Código:")]),t._v(" "+t._s(t.selectedService.code))]),e("p",[e("strong",[t._v("Fecha de Servicio:")]),t._v(" "+t._s(t.formatDate(t.selectedService.serviceDate)))]),e("p",[e("strong",[t._v("Hora de Salida:")]),t._v(" "+t._s(t.selectedService.departureTime))]),e("p",[e("strong",[t._v("Estado:")]),t._v(" "),e("StatusBadge",{attrs:{status:t.selectedService.status,text:t.getStatusText(t.selectedService.status)}})],1),e("h4",{staticStyle:{margin:"1.5rem 0 1rem 0",color:"var(--color-turquoise)"}},[t._v("Punto de Origen")]),e("div",{staticStyle:{"background-color":"#f8f9fa",padding:"1rem","border-radius":"6px","border-left":"4px solid var(--color-turquoise)"}},[e("div",{staticStyle:{"font-weight":"bold",color:"var(--color-turquoise)","margin-bottom":"0.5rem"}},[t._v(" "+t._s(t.selectedService.origin.district)+" ")]),e("div",{staticStyle:{color:"#666"}},[t._v(" "+t._s(t.selectedService.origin.address)+" ")])]),e("h4",{staticStyle:{margin:"1.5rem 0 1rem 0",color:"var(--color-turquoise)"}},[t._v("Destinos ("+t._s(t.selectedService.destinations.length)+")")]),e("div",{staticStyle:{display:"flex","flex-direction":"column",gap:"0.75rem"}},t._l(t.selectedService.destinations,(function(r,i){return e("div",{key:i,staticStyle:{"background-color":"#f8f9fa",padding:"1rem","border-radius":"6px","border-left":"4px solid #28a745"}},[e("div",{staticStyle:{"font-weight":"bold",color:"#28a745","margin-bottom":"0.5rem"}},[t._v(" "+t._s(i+1)+". "+t._s(r.district)+" ")]),e("div",{staticStyle:{color:"#666"}},[t._v(" "+t._s(r.address)+" ")])])})),0)]),e("div",[e("h4",{staticStyle:{"margin-bottom":"1rem",color:"var(--color-turquoise)"}},[t._v("Asignación")]),e("p",[e("strong",[t._v("Conductor:")]),t._v(" "+t._s(t.selectedService.driverName))]),e("p",[e("strong",[t._v("Vehículo:")]),t._v(" "+t._s(t.selectedService.vehiclePlate)+" - "+t._s(t.selectedService.vehicleModel))]),e("h4",{staticStyle:{margin:"1.5rem 0 1rem 0",color:"var(--color-turquoise)"}},[t._v("Observaciones")]),e("p",{staticStyle:{"background-color":"#f8f9fa",padding:"1rem","border-radius":"4px","min-height":"3rem"}},[t._v(" "+t._s(t.selectedService.observations||"Sin observaciones")+" ")]),e("h4",{staticStyle:{margin:"1.5rem 0 1rem 0",color:"var(--color-turquoise)"}},[t._v("Fechas")]),e("p",[e("strong",[t._v("Creado:")]),t._v(" "+t._s(t.formatDateTime(t.selectedService.createdAt)))]),t.selectedService.updatedAt?e("p",[e("strong",[t._v("Última actualización:")]),t._v(" "+t._s(t.formatDateTime(t.selectedService.updatedAt)))]):t._e()])])]):t._e()]),e("Modal",{attrs:{show:t.showCancelModal,title:"Confirmar Anulación"},on:{close:function(e){t.showCancelModal=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showCancelModal=!1}}},[t._v("Cancelar")]),e("button",{staticClass:"btn btn-danger",on:{click:t.cancelService}},[t._v(" Anular Servicio ")])]},proxy:!0}])},[t.serviceToCancel?e("div",[e("p",[t._v("¿Está seguro que desea anular el servicio "),e("strong",[t._v(t._s(t.serviceToCancel.code))]),t._v("?")]),e("p",{staticStyle:{color:"#666","font-size":"0.9rem"}},[t._v(" Conductor: "+t._s(t.serviceToCancel.driverName)),e("br"),t._v(" Fecha: "+t._s(t.formatDate(t.serviceToCancel.serviceDate))+" "+t._s(t.serviceToCancel.departureTime)+" ")]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"cancelReason"}},[t._v("Motivo de anulación *")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancelReason,expression:"cancelReason"}],staticClass:"form-control",attrs:{id:"cancelReason",rows:"3",placeholder:"Ingrese el motivo de la anulación...",required:""},domProps:{value:t.cancelReason},on:{input:function(e){e.target.composing||(t.cancelReason=e.target.value)}}})])]):t._e()])],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"0.875rem",color:"var(--color-warning)"}},[e("i",{staticClass:"fas fa-clock"}),t._v(" Por iniciar ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"stats-icon"},[e("i",{staticClass:"fas fa-clock"})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"0.875rem",color:"var(--color-turquoise)"}},[e("i",{staticClass:"fas fa-route"}),t._v(" En progreso ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"stats-icon"},[e("i",{staticClass:"fas fa-route"})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"0.875rem",color:"var(--color-success)"}},[e("i",{staticClass:"fas fa-check-circle"}),t._v(" Finalizados ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"stats-icon"},[e("i",{staticClass:"fas fa-check-circle"})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"0.875rem",color:"#666"}},[e("i",{staticClass:"fas fa-list"}),t._v(" Este mes ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"stats-icon"},[e("i",{staticClass:"fas fa-list"})])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Código")]),e("th",[t._v("Fecha Servicio")]),e("th",[t._v("Ruta")]),e("th",[t._v("Conductor")]),e("th",[t._v("Placa")]),e("th",[t._v("Hora Salida")]),e("th",[t._v("Estado")]),e("th",[t._v("Acciones")])])])}],s=r(4048),c=r(388),o=r(9258),n=(r(8706),r(8980),r(4423),r(8598),r(5086),r(6910),r(1688),r(3288),r(2489),r(3579),r(9432),r(1699),r(7764),r(2762),r(2953),r(3296),r(7208),r(8408),r(4603),r(7566),r(8721),r(3690)),l=r(4300);const d={name:"FleetManagement",components:{Header:n.Y9,StatusBadge:n.Wh,Modal:n.aF,Pagination:n.dK},data:function(){return{loading:!1,error:null,searchQuery:"",statusFilter:"",dateFilter:"",currentPage:1,itemsPerPage:10,services:[],serviceStats:{pending:0,inRoute:0,completedToday:0,total:0},showDetailModal:!1,showCancelModal:!1,selectedService:null,serviceToCancel:null,cancelReason:"",mockServices:[{id:1,code:"P04839",serviceDate:"2025-07-07",departureTime:"06:00",vehicleId:1,vehiclePlate:"ALP807",vehicleModel:"Toyota Hiace",driverId:1,driverName:"Carlos Alberto Magno Torres",origin:{address:"Av. Los Frutales 344",district:"Ate"},destinations:[{address:"Jr. Monterrey 123",district:"Surquillo"},{address:"Av. La Molina 456",district:"La Molina"}],observations:"Servicio especial",status:"pending",createdAt:"2025-07-06T10:00:00Z",updatedAt:"2025-07-06T10:00:00Z"},{id:2,code:"P04840",serviceDate:"2025-07-07",departureTime:"08:00",vehicleId:2,vehiclePlate:"ALP849",vehicleModel:"Ford Transit",driverId:2,driverName:"David Valentín Cruzado Estrada",origin:{address:"Av. Separadora Industrial 123",district:"Ate"},destinations:[{address:"Jr. Tomás Marsano 234",district:"Surquillo"}],observations:"",status:"in_route",createdAt:"2025-07-06T09:00:00Z",updatedAt:"2025-07-07T08:00:00Z"}]}},computed:{filteredServices:function(){var t=this,e=(0,o.A)(this.services);if(this.searchQuery){var r=this.searchQuery.toLowerCase();e=e.filter((function(t){return t.code.toLowerCase().includes(r)||t.driverName.toLowerCase().includes(r)||t.vehiclePlate.toLowerCase().includes(r)||t.origin.district.toLowerCase().includes(r)||t.origin.address.toLowerCase().includes(r)||t.destinations.some((function(t){return t.district.toLowerCase().includes(r)||t.address.toLowerCase().includes(r)}))}))}return this.statusFilter&&(e=e.filter((function(e){return e.status===t.statusFilter}))),this.dateFilter&&(e=e.filter((function(e){return e.serviceDate===t.dateFilter}))),e.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)}))},paginatedServices:function(){var t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredServices.slice(t,e)}},methods:{loadServices:function(){var t=this;return(0,c.A)((0,s.A)().mark((function e(){var r;return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,e.next=5,l.dJ.getAll();case 5:r=e.sent,t.services=r.data,t.calculateStats(),t.$notify("Servicios cargados correctamente","success"),e.next=18;break;case 11:e.prev=11,e.t0=e["catch"](2),console.error("Error loading services:",e.t0),t.error="Error al cargar los servicios",t.services=t.mockServices,t.calculateStats(),t.$handleApiError(e.t0,"Error al cargar servicios");case 18:return e.prev=18,t.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,11,18,21]])})))()},calculateStats:function(){this.serviceStats={pending:this.services.filter((function(t){return"pending"===t.status})).length,inRoute:this.services.filter((function(t){return"in_route"===t.status})).length,completedToday:this.services.filter((function(t){return"completed"===t.status&&t.serviceDate===(new Date).toISOString().split("T")[0]})).length,total:this.services.length}},getStatusText:function(t){var e={pending:"Pendiente",in_route:"En Ruta",completed:"Completado",cancelled:"Anulado"};return e[t]||t},viewService:function(t){this.selectedService=t,this.showDetailModal=!0},editService:function(t){this.$router.push("/service/edit/".concat(t.id))},confirmCancelService:function(t){this.serviceToCancel=t,this.cancelReason="",this.showCancelModal=!0},cancelService:function(){var t=this;return(0,c.A)((0,s.A)().mark((function e(){var r;return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.cancelReason.trim()){e.next=3;break}return t.$notify("Debe ingresar un motivo para la anulación","warning"),e.abrupt("return");case 3:return e.prev=3,e.next=6,l.dJ.cancel(t.serviceToCancel.id,{reason:t.cancelReason});case 6:r=t.services.findIndex((function(e){return e.id===t.serviceToCancel.id})),-1!==r&&(t.services[r].status="cancelled",t.services[r].statusName="Anulado"),t.showCancelModal=!1,t.calculateStats(),t.$notify("Servicio anulado correctamente","success"),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),console.error("Error cancelling service:",e.t0),t.$handleApiError(e.t0,"Error al anular el servicio");case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))()},clearFilters:function(){this.searchQuery="",this.statusFilter="",this.dateFilter="",this.currentPage=1},exportServices:function(){var t=this;if(0!==this.filteredServices.length){var e=this.filteredServices.map((function(e){return{Código:e.code,"Fecha Servicio":t.formatDate(e.serviceDate),"Hora Salida":e.departureTime,Conductor:e.driverName,Placa:e.vehiclePlate,"Origen - Distrito":e.origin.district,"Origen - Dirección":e.origin.address,Destinos:e.destinations.map((function(t,e){return"".concat(e+1,". ").concat(t.district," - ").concat(t.address)})).join(" | "),Estado:t.getStatusText(e.status),Observaciones:e.observations||""}}));this.exportToCSV(e,"servicios_".concat((new Date).toISOString().split("T")[0],".csv")),this.$notify("Archivo exportado correctamente","success")}else this.$notify("No hay servicios para exportar","warning")},exportToCSV:function(t,e){var r=Object.keys(t[0]),i=[r.join(",")].concat((0,o.A)(t.map((function(t){return r.map((function(e){return'"'.concat(t[e],'"')})).join(",")})))).join("\n"),a=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){var c=URL.createObjectURL(a);s.setAttribute("href",c),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},formatDate:function(t){if(!t)return"N/A";var e=new Date(t);return e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})},formatDateTime:function(t){if(!t)return"N/A";var e=new Date(t);return e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}},created:function(){var t=this;return(0,c.A)((0,s.A)().mark((function e(){return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadServices();case 2:case"end":return e.stop()}}),e)})))()}},v=d;var u=r(1656),f=(0,u.A)(v,i,a,!1,null,"5d5265a0",null);const m=f.exports}}]);