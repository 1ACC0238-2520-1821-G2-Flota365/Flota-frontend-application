"use strict";(self["webpackChunkflota365_vue"]=self["webpackChunkflota365_vue"]||[]).push([[1],{5001:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});a(2675),a(9463),a(8706),a(2008),a(4346),a(2062),a(4782),a(8111),a(1701),a(6099);var i=function(){var t=this,e=t._self._c;return e("div",[e("Header",{attrs:{title:"Monitoreo de Flota en Tiempo Real"}}),e("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"1.25rem"}},[e("div",{staticStyle:{display:"flex",gap:"0.75rem"}},[e("div",{staticClass:"form-group",staticStyle:{margin:"0",width:"250px"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterStatus,expression:"filterStatus"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filterStatus=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:""}},[t._v("Todos los vehículos")]),e("option",{attrs:{value:"active"}},[t._v("Vehículos activos")]),e("option",{attrs:{value:"warning"}},[t._v("Vehículos en ruta")]),e("option",{attrs:{value:"inactive"}},[t._v("Vehículos detenidos")])])]),e("button",{staticClass:"btn btn-secondary",on:{click:t.refreshData}},[e("i",{staticClass:"fas fa-redo-alt",staticStyle:{"margin-right":"0.5rem"}}),t._v(" Actualizar ")])]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticStyle:{"margin-right":"0.75rem"}},[t._v("Actualización automática:")]),e("label",{staticClass:"switch",staticStyle:{position:"relative",display:"inline-block",width:"50px",height:"24px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoUpdate,expression:"autoUpdate"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.autoUpdate)?t._i(t.autoUpdate,null)>-1:t.autoUpdate},on:{change:function(e){var a=t.autoUpdate,i=e.target,r=!!i.checked;if(Array.isArray(a)){var o=null,s=t._i(a,o);i.checked?s<0&&(t.autoUpdate=a.concat([o])):s>-1&&(t.autoUpdate=a.slice(0,s).concat(a.slice(s+1)))}else t.autoUpdate=r}}}),e("span",{staticStyle:{position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0","background-color":"var(--color-turquoise)","border-radius":"24px",transition:".4s"}})]),e("span",{staticStyle:{"margin-left":"0.75rem",color:"var(--color-success)"}},[t._v(t._s(t.autoUpdate?"Activa":"Inactiva"))])])]),e("div",{staticStyle:{display:"flex",gap:"1.25rem",height:"calc(100vh - 250px)"}},[e("div",{staticClass:"card",staticStyle:{flex:"2",padding:"0",overflow:"hidden",position:"relative"}},[e("div",{staticStyle:{height:"100%","background-color":"#f0f0f0",position:"relative"}},[e("div",{staticStyle:{height:"100%","background-color":"#e9e9e9",position:"relative"}},t._l(t.mockVehicles,(function(a){return e("div",{key:a.id,staticStyle:{position:"absolute",width:"20px",height:"20px","border-radius":"50%",transform:"translate(-50%, -50%)"},style:{left:"".concat(300*(a.location.lng+77.1),"px"),top:"".concat(-200*(a.location.lat+12.15),"px"),backgroundColor:t.getStatusColor(a.status)},attrs:{title:"".concat(a.model," (").concat(a.plate,")")}})})),0),t._m(0),t._m(1)])]),e("div",{staticClass:"card",staticStyle:{flex:"1",padding:"0",display:"flex","flex-direction":"column"}},[t._m(2),e("div",{staticStyle:{flex:"1","overflow-y":"auto",padding:"0 0.5rem"}},t._l(t.filteredVehicles,(function(a){return e("div",{key:a.id,staticStyle:{padding:"1rem","border-bottom":"1px solid var(--color-gray-medium)",display:"flex","align-items":"center"}},[e("div",{staticStyle:{width:"12px",height:"12px","border-radius":"50%","margin-right":"1rem"},style:{backgroundColor:t.getStatusColor(a.status)}}),e("div",{staticStyle:{flex:"1"}},[e("h3",{staticStyle:{margin:"0","font-size":"1rem"}},[t._v(t._s(a.model)+" ("+t._s(a.plate)+")")]),e("p",{staticStyle:{margin:"0.25rem 0 0 0","font-size":"0.875rem"}},[t._v("Conductor: "+t._s(a.driver))]),e("p",{staticStyle:{margin:"0.25rem 0 0 0","font-size":"0.813rem",color:"#666"}},[t._v("Velocidad: "+t._s(a.speed)+" km/h"+t._s(0===a.speed?" (Detenido)":""))])]),e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"0.25rem 0.5rem","font-size":"0.813rem"},on:{click:function(e){return t.showVehicleDetails(a)}}},[e("i",{staticClass:"fas fa-info-circle"})])])})),0),e("div",{staticStyle:{padding:"1rem","border-top":"1px solid var(--color-gray-medium)","background-color":"var(--color-gray-light)"}},[e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("span",[t._v("Total vehículos monitoreados:")]),e("strong",[t._v(t._s(t.mockVehicles.length))])]),e("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"0.5rem"}},[e("span",[t._v("Última actualización:")]),e("span",[t._v(t._s(t.currentDateTime))])])])])]),e("div",{staticClass:"card",staticStyle:{"margin-top":"1.25rem"}},[t._m(3),e("div",{staticStyle:{display:"flex","flex-direction":"column",gap:"0.75rem"}},t._l(t.mockAlerts,(function(a,i){return e("div",{key:i,staticStyle:{display:"flex",gap:"1rem",padding:"0.75rem"},style:t.getAlertStyle(a.type)},[e("i",{class:t.getAlertIcon(a.type),style:{color:t.getAlertColor(a.type),fontSize:"1.25rem"}}),e("div",[e("h4",{staticStyle:{margin:"0"}},[t._v(t._s(a.title))]),e("p",{staticStyle:{margin:"0.25rem 0 0 0",color:"#666"}},[t._v(t._s(a.description))]),e("p",{staticStyle:{margin:"0.25rem 0 0 0","font-size":"0.813rem",color:"#999"}},[t._v("hace "+t._s(a.time))])]),t._m(4,!0)])})),0)]),e("Modal",{attrs:{show:t.showVehicleModal,title:"Detalles del Vehículo"},on:{close:function(e){t.showVehicleModal=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.showVehicleModal=!1}}},[t._v("Cerrar")]),e("button",{staticClass:"btn btn-primary"},[e("i",{staticClass:"fas fa-phone",staticStyle:{"margin-right":"0.5rem"}}),t._v(" Contactar conductor ")])]},proxy:!0}])},[t.selectedVehicle?e("div",[e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"1rem"}},[e("div",[e("h3",{staticStyle:{margin:"0"}},[t._v(t._s(t.selectedVehicle.model)+" ("+t._s(t.selectedVehicle.plate)+")")]),e("p",[t._v("Conductor: "+t._s(t.selectedVehicle.driver))])]),e("StatusBadge",{attrs:{status:t.selectedVehicle.status,text:t.getStatusText(t.selectedVehicle.status)}})],1),e("div",{staticStyle:{"background-color":"var(--color-gray-light)",padding:"1rem","border-radius":"4px","margin-bottom":"1rem"}},[e("h4",{staticStyle:{"margin-top":"0"}},[t._v("Datos en tiempo real")]),e("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr",gap:"0.5rem"}},[e("div",[e("p",[e("strong",[t._v("Velocidad:")]),t._v(" "+t._s(t.selectedVehicle.speed)+" km/h")]),e("p",[e("strong",[t._v("Coordenadas:")]),t._v(" "+t._s(t.selectedVehicle.location.lat)+", "+t._s(t.selectedVehicle.location.lng))])]),e("div",[e("p",[e("strong",[t._v("Nivel de combustible:")]),t._v(" 75%")]),e("p",[e("strong",[t._v("Temperatura del motor:")]),t._v(" 78°C")])])])]),e("div",{staticStyle:{"background-color":"var(--color-gray-light)",padding:"1rem","border-radius":"4px"}},[e("h4",{staticStyle:{"margin-top":"0"}},[t._v("Historial reciente")]),e("table",{staticStyle:{width:"100%","border-collapse":"collapse"}},[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left",padding:"0.5rem","border-bottom":"1px solid #ddd"}},[t._v("Fecha/Hora")]),e("th",{staticStyle:{"text-align":"left",padding:"0.5rem","border-bottom":"1px solid #ddd"}},[t._v("Evento")])])]),e("tbody",[e("tr",[e("td",{staticStyle:{padding:"0.5rem","border-bottom":"1px solid #eee"}},[t._v("26/04/2025 10:30")]),e("td",{staticStyle:{padding:"0.5rem","border-bottom":"1px solid #eee"}},[t._v("Inicio de ruta")])]),e("tr",[e("td",{staticStyle:{padding:"0.5rem","border-bottom":"1px solid #eee"}},[t._v("26/04/2025 09:45")]),e("td",{staticStyle:{padding:"0.5rem","border-bottom":"1px solid #eee"}},[t._v("Carga de combustible")])]),e("tr",[e("td",{staticStyle:{padding:"0.5rem","border-bottom":"1px solid #eee"}},[t._v("26/04/2025 09:30")]),e("td",{staticStyle:{padding:"0.5rem","border-bottom":"1px solid #eee"}},[t._v("Verificación pre-ruta")])])])])])]):t._e()])],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"absolute",top:"10px",right:"10px",background:"white","border-radius":"4px","box-shadow":"0 2px 6px rgba(0,0,0,0.1)",padding:"5px"}},[e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"5px",margin:"2px","font-size":"14px"}},[e("i",{staticClass:"fas fa-plus"})]),e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"5px",margin:"2px","font-size":"14px"}},[e("i",{staticClass:"fas fa-minus"})]),e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"5px",margin:"2px","font-size":"14px"}},[e("i",{staticClass:"fas fa-crosshairs"})]),e("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"5px",margin:"2px","font-size":"14px"}},[e("i",{staticClass:"fas fa-layer-group"})])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"absolute",bottom:"10px",left:"10px",background:"white","border-radius":"4px","box-shadow":"0 2px 6px rgba(0,0,0,0.1)",padding:"10px"}},[e("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"5px"}},[e("div",{staticStyle:{width:"12px",height:"12px","border-radius":"50%","background-color":"var(--color-success)","margin-right":"8px"}}),e("span",[t._v("En movimiento")])]),e("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"5px"}},[e("div",{staticStyle:{width:"12px",height:"12px","border-radius":"50%","background-color":"var(--color-warning)","margin-right":"8px"}}),e("span",[t._v("Detenido")])]),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("div",{staticStyle:{width:"12px",height:"12px","border-radius":"50%","background-color":"var(--color-error)","margin-right":"8px"}}),e("span",[t._v("Alerta")])])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{padding:"1.25rem","border-bottom":"1px solid var(--color-gray-medium)"}},[e("h2",{staticStyle:{margin:"0","font-size":"1.25rem"}},[t._v("Estado de Vehículos")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header"},[e("h2",{staticClass:"card-title"},[t._v("Alertas recientes")]),e("button",{staticClass:"btn btn-secondary"},[e("i",{staticClass:"fas fa-bell-slash",staticStyle:{"margin-right":"0.5rem"}}),t._v(" Silenciar alertas ")])])},function(){var t=this,e=t._self._c;return e("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-left":"auto","align-self":"center",padding:"0.25rem 0.5rem","font-size":"0.813rem"}},[e("i",{staticClass:"fas fa-phone"})])}],o=(a(1629),a(3288),a(2489),a(7588),a(3500),a(6031),a(3690));const s={name:"MonitoringPanel",components:{Header:o.Y9,StatusBadge:o.Wh,Modal:o.aF},data:function(){return{filterStatus:"",autoUpdate:!0,updateInterval:null,currentDateTime:(new Date).toLocaleString(),showVehicleModal:!1,selectedVehicle:null,mockVehicles:[{id:1,model:"Toyota Hilux",plate:"ABC-123",driver:"Juan Pérez",speed:45,status:"active",location:{lat:-12.0464,lng:-77.0428}},{id:2,model:"Ford Ranger",plate:"XYZ-789",driver:"María García",speed:0,status:"inactive",location:{lat:-12.0564,lng:-77.0528}},{id:3,model:"Nissan Frontier",plate:"GHI-456",driver:"Carlos López",speed:60,status:"warning",location:{lat:-12.0364,lng:-77.0328}}],mockAlerts:[{type:"error",title:"Vehículo detenido",description:"El vehículo XYZ-789 lleva más de 30 minutos sin movimiento",time:"15 min"},{type:"warning",title:"Exceso de velocidad",description:"El vehículo GHI-456 excede el límite de velocidad permitido",time:"25 min"},{type:"info",title:"Ruta completada",description:"El vehículo ABC-123 completó exitosamente su ruta asignada",time:"1 hora"}]}},computed:{filteredVehicles:function(){var t=this;return this.filterStatus?this.mockVehicles.filter((function(e){return e.status===t.filterStatus})):this.mockVehicles}},methods:{getStatusColor:function(t){var e={active:"var(--color-success)",warning:"var(--color-warning)",inactive:"var(--color-warning)",error:"var(--color-error)"};return e[t]||"var(--color-success)"},getStatusText:function(t){var e={active:"Activo",warning:"En ruta",inactive:"Detenido",error:"Alerta"};return e[t]||t},getAlertStyle:function(t){var e={error:"var(--color-error)",warning:"var(--color-warning)",info:"var(--color-turquoise)"},a=e[t]||"var(--color-turquoise)";return{borderLeft:"4px solid ".concat(a),backgroundColor:"rgba(244, 67, 54, 0.05)"}},getAlertColor:function(t){var e={error:"var(--color-error)",warning:"var(--color-warning)",info:"var(--color-turquoise)"};return e[t]||"var(--color-turquoise)"},getAlertIcon:function(t){var e={error:"fas fa-exclamation-triangle",warning:"fas fa-clock",info:"fas fa-info-circle"};return e[t]||"fas fa-info-circle"},refreshData:function(){this.currentDateTime=(new Date).toLocaleString(),this.mockVehicles.forEach((function(t){"active"===t.status&&t.speed>0&&(t.speed=Math.max(20,Math.min(100,t.speed+(20*Math.random()-10))))}))},showVehicleDetails:function(t){this.selectedVehicle=t,this.showVehicleModal=!0},startAutoUpdate:function(){var t=this;this.stopAutoUpdate(),this.autoUpdate&&(this.updateInterval=setInterval((function(){t.refreshData()}),5e3))},stopAutoUpdate:function(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)}},watch:{autoUpdate:function(){this.startAutoUpdate()}},created:function(){this.startAutoUpdate()},beforeDestroy:function(){this.stopAutoUpdate()}},l=s;var n=a(1656),c=(0,n.A)(l,i,r,!1,null,null,null);const d=c.exports},8706:(t,e,a)=>{var i=a(6518),r=a(9039),o=a(4376),s=a(34),l=a(8981),n=a(6198),c=a(6837),d=a(4659),u=a(1469),p=a(597),v=a(8227),m=a(9519),g=v("isConcatSpreadable"),f=m>=51||!r((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),h=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)},y=!f||!p("concat");i({target:"Array",proto:!0,arity:1,forced:y},{concat:function(t){var e,a,i,r,o,s=l(this),p=u(s,0),v=0;for(e=-1,i=arguments.length;e<i;e++)if(o=-1===e?s:arguments[e],h(o))for(r=n(o),c(v+r),a=0;a<r;a++,v++)a in o&&d(p,v,o[a]);else c(v+1),d(p,v++,o);return p.length=v,p}})}}]);